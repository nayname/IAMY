{
    "label": "others",
    "workflow": [
        {
            "step": 1,
            "label": "backend",
            "introduction": "This Python utility sets the TXFLAGS environment variable for the current session and appends it to the user\u2019s shell profile so that all future terminal windows automatically inherit it.",
            "code": "import os\nfrom pathlib import Path\n\n\ndef set_txflags(gas_flags: str = \"--gas=auto --gas-adjustment 1.3 --gas-prices 0.025uatom\") -> None:\n    \"\"\"Set TXFLAGS in the running process and persist it to the user's shell profile.\n\n    Args:\n        gas_flags (str): The value to assign to TXFLAGS.\n    \"\"\"\n    try:\n        # 1. Set for the current Python process (effective immediately for subprocess calls)\n        os.environ[\"TXFLAGS\"] = gas_flags\n\n        # 2. Attempt to persist in the user's shell profile so new terminals inherit the var\n        shell = os.environ.get(\"SHELL\", \"\")\n        # Decide which RC file(s) to modify based on the active shell\n        candidate_files = []\n        if \"zsh\" in shell:\n            candidate_files = [Path.home() / \".zshrc\"]\n        else:\n            candidate_files = [Path.home() / \".bashrc\", Path.home() / \".bash_profile\"]\n\n        export_line = f'export TXFLAGS=\"{gas_flags}\"'\n\n        for rc_file in candidate_files:\n            try:\n                if rc_file.exists():\n                    content = rc_file.read_text()\n                    if export_line in content:\n                        # Already present, skip to the next file\n                        continue\n                # Append the export line\n                with rc_file.open(\"a\", encoding=\"utf-8\") as fp:\n                    fp.write(f\"\\n# Added by Cosmos helper\\n{export_line}\\n\")\n            except Exception as rc_err:\n                # Log the error but continue execution\n                print(f\"[WARN] Could not update {rc_file}: {rc_err}\")\n\n        print(\"TXFLAGS environment variable set successfully.\")\n    except Exception as err:\n        # Surface a clean error message for unexpected issues\n        raise RuntimeError(f\"Failed to set TXFLAGS: {err}\")\n\n\nif __name__ == \"__main__\":\n    # When executed as a script, perform the side effect immediately\n    set_txflags()",
            "usage": "Option 1: Run it directly from the terminal:\n$ python set_txflags.py\n\nOption 2: Import and call within another Python module:\nfrom set_txflags import set_txflags\nset_txflags()"
        }
    ]
}