{
    "label": "others",
    "workflow": [
        {
            "step": 1,
            "label": "backend",
            "introduction": "This Python helper copies every *.json file that represents a validator gentx into the chain\u2019s canonical `config/gentx/` directory and returns the absolute paths of the files that were moved.",
            "code": "import os\nimport shutil\nimport glob\nfrom typing import List\n\ndef gather_gentx_files(source_dirs: List[str], target_dir: str = \"config/gentx\") -> List[str]:\n    \"\"\"Gather all validator gentx JSON files into the chain's `config/gentx/` folder.\n\n    Parameters\n    ----------\n    source_dirs : List[str]\n        A list of directories where gentx files can be found.\n    target_dir : str, optional\n        Destination directory for the gentx files, by default \"config/gentx\".\n\n    Returns\n    -------\n    List[str]\n        Absolute paths of all gentx files that were copied.\n    \"\"\"\n    # Ensure the destination exists.\n    if not os.path.isdir(target_dir):\n        os.makedirs(target_dir, exist_ok=True)\n\n    copied: List[str] = []\n\n    for src in source_dirs:\n        if not os.path.isdir(src):\n            raise FileNotFoundError(f\"Source directory '{src}' does not exist.\")\n\n        # Copy every .json file found in that directory.\n        for file_path in glob.glob(os.path.join(src, \"*.json\")):\n            destination = os.path.join(target_dir, os.path.basename(file_path))\n            shutil.copy2(file_path, destination)\n            copied.append(os.path.abspath(destination))\n\n    if not copied:\n        raise RuntimeError(\"No gentx JSON files were discovered in the supplied directories.\")\n\n    return copied\n\n# Stand-alone usage example\nif __name__ == \"__main__\":\n    files_moved = gather_gentx_files([\"./gentx_inputs\"])\n    print(f\"Successfully gathered {len(files_moved)} gentx files \u2192 {os.path.abspath('config/gentx')}\")",
            "usage": "copied_files = gather_gentx_files([\"/path/to/validators/gentx\"])"
        },
        {
            "step": 2,
            "label": "backend",
            "introduction": "Runs `<chain_binary> collect-gentxs` to merge every gentx into the genesis file. The helper returns the absolute path to the generated `genesis.json`.",
            "code": "import subprocess\nimport os\nfrom pathlib import Path\n\ndef collect_gentxs(chain_binary: str = os.getenv(\"CHAIN_BINARY\", \"mychaind\"), home: str = \".\") -> str:\n    \"\"\"Execute `<chain_binary> collect-gentxs` and return the final genesis path.\n\n    Parameters\n    ----------\n    chain_binary : str, optional\n        The binary to execute, defaults to the `CHAIN_BINARY` env var or `mychaind`.\n    home : str, optional\n        The node's home directory (where the `config/` folder lives), defaults to `.`.\n\n    Returns\n    -------\n    str\n        Absolute path to the resulting genesis.json file.\n    \"\"\"\n    cmd = [chain_binary, \"collect-gentxs\", \"--home\", home]\n    result = subprocess.run(cmd, text=True, capture_output=True)\n\n    if result.returncode != 0:\n        raise RuntimeError(\n            \"collect-gentxs failed!\\n\" +\n            f\"stdout:\\n{result.stdout}\\n\" +\n            f\"stderr:\\n{result.stderr}\"\n        )\n\n    genesis_path = Path(home) / \"config\" / \"genesis.json\"\n    if not genesis_path.is_file():\n        raise FileNotFoundError(\"genesis.json was not created \u2014 please check the logs above.\")\n\n    return str(genesis_path.resolve())\n\n# Stand-alone usage example\nif __name__ == \"__main__\":\n    genesis_file = collect_gentxs()\n    print(f\"Genesis generated at \u2192 {genesis_file}\")",
            "usage": "genesis_path = collect_gentxs(chain_binary=\"neutrond\", home=\"/validator/.neutrond\")"
        },
        {
            "step": 3,
            "label": "backend",
            "introduction": "Executes `<chain_binary> validate-genesis` to confirm that the combined genesis file is correct and ready for main-net launch.",
            "code": "import subprocess\nimport os\n\ndef validate_genesis(chain_binary: str = os.getenv(\"CHAIN_BINARY\", \"mychaind\"), home: str = \".\") -> bool:\n    \"\"\"Run `<chain_binary> validate-genesis` to ensure the genesis file is valid.\n\n    Parameters\n    ----------\n    chain_binary : str, optional\n        The chain binary to run, default comes from `CHAIN_BINARY` env var.\n    home : str, optional\n        Node's home directory (where the `config/` folder is), defaults to `.`.\n\n    Returns\n    -------\n    bool\n        True if validation passes; raises otherwise.\n    \"\"\"\n    cmd = [chain_binary, \"validate-genesis\", \"--home\", home]\n    result = subprocess.run(cmd, text=True, capture_output=True)\n\n    if result.returncode != 0:\n        raise RuntimeError(\n            \"Genesis validation failed!\\n\" +\n            f\"stdout:\\n{result.stdout}\\n\" +\n            f\"stderr:\\n{result.stderr}\"\n        )\n\n    # Success \u2014 echo whatever the binary output plus confirm.\n    print(result.stdout or \"Genesis validation passed \u2705\")\n    return True\n\n# Stand-alone usage example\nif __name__ == \"__main__\":\n    validate_genesis()\n    print(\"Genesis file is valid and the chain is ready to start \ud83d\ude80\")",
            "usage": "is_valid = validate_genesis(chain_binary=\"neutrond\", home=\"/validator/.neutrond\")"
        }
    ]
}