{
    "label": "others",
    "workflow": [
        {
            "step": 1,
            "label": "backend",
            "introduction": "Step 1 defines a Python helper that retrieves the node\u2019s JSON-RPC endpoint from an environment variable. Keeping the URL in the backend prevents accidental exposure in client-side bundles.",
            "code": "import os\n\n\ndef select_rpc_endpoint() -> str:\n    # Returns the JSON-RPC endpoint configured in the environment.\n    rpc_url = os.getenv(\"RPC_URL\")\n    if not rpc_url:\n        raise EnvironmentError(\"RPC_URL environment variable is not set.\")\n    return rpc_url\n",
            "usage": "rpc_url = select_rpc_endpoint()"
        },
        {
            "step": 2,
            "label": "backend",
            "introduction": "Step 2 adds a helper that assembles a Basic-Auth header for the private debug namespace, again sourcing credentials from environment variables so they never reach the browser.",
            "code": "import os\nimport base64\nfrom typing import Dict\n\n\ndef authenticate_debug_namespace() -> Dict[str, str]:\n    # Builds Basic-Auth headers for the private debug RPC namespace.\n    user = os.getenv(\"RPC_USER\")\n    password = os.getenv(\"RPC_PASSWORD\")\n    if user is None or password is None:\n        raise EnvironmentError(\"RPC_USER or RPC_PASSWORD environment variables are missing.\")\n    token_bytes = f\"{user}:{password}\".encode()\n    token_b64 = base64.b64encode(token_bytes).decode()\n    return {\"Authorization\": f\"Basic {token_b64}\"}\n",
            "usage": "headers = authenticate_debug_namespace()"
        },
        {
            "step": 3,
            "label": "backend",
            "introduction": "Step 3 combines the previous helpers to issue the JSON-RPC call `debug_setBlockProfileRate` with a rate of 1. The function handles network errors and JSON-RPC error responses.",
            "code": "import os\nimport base64\nimport requests\nfrom typing import Any, Dict\n\n\ndef select_rpc_endpoint() -> str:\n    # Returns the JSON-RPC endpoint configured in the environment.\n    rpc_url = os.getenv(\"RPC_URL\")\n    if not rpc_url:\n        raise EnvironmentError(\"RPC_URL environment variable is not set.\")\n    return rpc_url\n\n\ndef authenticate_debug_namespace() -> Dict[str, str]:\n    # Builds Basic-Auth headers for the private debug RPC namespace.\n    user = os.getenv(\"RPC_USER\")\n    password = os.getenv(\"RPC_PASSWORD\")\n    if user is None or password is None:\n        raise EnvironmentError(\"RPC_USER or RPC_PASSWORD environment variables are missing.\")\n    token_bytes = f\"{user}:{password}\".encode()\n    token_b64 = base64.b64encode(token_bytes).decode()\n    return {\"Authorization\": f\"Basic {token_b64}\"}\n\n\ndef debug_set_block_profile_rate(rate: int = 1, request_id: int = 1) -> Any:\n    \"\"\"Send a JSON-RPC call to debug_setBlockProfileRate.\"\"\"\n    rpc_url = select_rpc_endpoint()\n    headers = authenticate_debug_namespace()\n\n    payload = {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"debug_setBlockProfileRate\",\n        \"params\": [rate],\n        \"id\": request_id\n    }\n\n    try:\n        res = requests.post(rpc_url, json=payload, headers=headers, timeout=10)\n        res.raise_for_status()\n        res_json = res.json()\n    except requests.RequestException as e:\n        raise ConnectionError(f\"Unable to reach {rpc_url}: {e}\") from e\n\n    if \"error\" in res_json:\n        raise RuntimeError(f\"RPC responded with error: {res_json['error']}\")\n\n    return res_json.get(\"result\")\n",
            "usage": "result = debug_set_block_profile_rate(rate=1)"
        }
    ]
}