{
    "tools": [
        {
            "step": 1,
            "label": "frontend",
            "introduction": "Retrieves the connected user\u2019s Neutron bech32 address from the browser wallet (Keplr/Leap).",
            "function": "getUserWalletAddress()",
            "usage": "const userAddress = await getUserWalletAddress();"
        },
        {
            "step": 2,
            "label": "backend",
            "introduction": "Queries the WBTC/USDC Supervault contract for the caller\u2019s current share balance.",
            "function": "get_supervault_share_balance(address)",
            "usage": "shares = await get_supervault_share_balance(userAddress)"
        },
        {
            "step": 3,
            "label": "backend",
            "introduction": "Builds a MsgExecuteContract that withdraws the specified (full) share amount from the Supervault.",
            "function": "construct_wasm_execute_msg(sender, contract_address, shares_to_redeem)",
            "usage": "withdrawMsg = construct_wasm_execute_msg(userAddress, SUPER_VAULT_CONTRACT, shares)"
        },
        {
            "step": 4,
            "label": "frontend",
            "introduction": "Signs the withdrawal transaction with the user\u2019s wallet and broadcasts it to the Neutron network.",
            "function": "signAndBroadcastTx({ chainId, signDoc, offlineSigner })",
            "usage": "const txHash = await signAndBroadcastTx({ chainId: 'neutron-1', signDoc, offlineSigner });"
        },
        {
            "step": 5,
            "label": "backend",
            "introduction": "Checks the wallet\u2019s bank balances to confirm receipt of the withdrawn WBTC and USDC.",
            "function": "query_bank_balance(address, denom)",
            "usage": "wbtc = query_bank_balance(userAddress, WBTC_DENOM); usdc = query_bank_balance(userAddress, USDC_DENOM);"
        }
    ],
    "frontend": [
        "const userAddress = await getUserWalletAddress();//step: 1 Tool: get_user_wallet_address Desciption: Obtain the wallet address that owns the Supervault position.",
        "const txHash = await signAndBroadcastTx({ chainId: 'neutron-1', signDoc, offlineSigner });//step: 4 Tool: sign_and_broadcast_tx Desciption: Sign and broadcast the withdrawal transaction."
    ],
    "backend": [
        "shares = await get_supervault_share_balance(userAddress)#step: 2 Tool: query_vault_balance Desciption: Fetch the user\u2019s current Supervault share balance or position ID to determine the full amount eligible for withdrawal.",
        "withdrawMsg = construct_wasm_execute_msg(userAddress, SUPER_VAULT_CONTRACT, shares)#step: 3 Tool: construct_tx_contract_execute Desciption: Build an ExecuteMsg to the Supervault contract invoking \u201cwithdraw_all\u201d (or a full-share withdrawal) with the user\u2019s entire share amount.",
        "wbtc = query_bank_balance(userAddress, WBTC_DENOM); usdc = query_bank_balance(userAddress, USDC_DENOM);#step: 5 Tool: query_bank_balances Desciption: After confirmation, query the wallet\u2019s balances to ensure both WBTC and USDC proceeds were received."
    ],
    "intent": "Withdraw all assets from the WBTC/USDC Supervault",
    "workflow": [
        {
            "step": 1,
            "tool": "get_user_wallet_address",
            "description": "Obtain the wallet address that owns the Supervault position."
        },
        {
            "step": 2,
            "tool": "query_vault_balance",
            "description": "Fetch the user\u2019s current Supervault share balance or position ID to determine the full amount eligible for withdrawal."
        },
        {
            "step": 3,
            "tool": "construct_tx_contract_execute",
            "description": "Build an ExecuteMsg to the Supervault contract invoking \u201cwithdraw_all\u201d (or a full-share withdrawal) with the user\u2019s entire share amount."
        },
        {
            "step": 4,
            "tool": "sign_and_broadcast_tx",
            "description": "Sign and broadcast the withdrawal transaction."
        },
        {
            "step": 5,
            "tool": "query_bank_balances",
            "description": "After confirmation, query the wallet\u2019s balances to ensure both WBTC and USDC proceeds were received."
        }
    ],
    "outcome_checks": [
        "Supervault share balance should drop to zero.",
        "Wallet WBTC and USDC balances should increase by the vault\u2019s payout amounts.",
        "Transaction logs should contain \u201caction=withdraw_all\u201d with correct token outputs."
    ]
}