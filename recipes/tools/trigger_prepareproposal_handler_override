{
    "tools": [
        {
            "step": 1,
            "label": "backend",
            "introduction": "search_circuit_docs quickly queries the Cosmos-SDK documentation site and returns any matching entries for a supplied search term.",
            "function": "search_circuit_docs(query)",
            "usage": "results = search_circuit_docs(\"Cosmos SDK PrepareProposal override BaseApp\")"
        },
        {
            "step": 2,
            "label": "backend",
            "introduction": "create_preblocker_fn programmatically adds a new custom ABCI handler function into app/app.go.",
            "function": "create_preblocker_fn(app_dir)",
            "usage": "create_preblocker_fn(\"./myapp\")"
        },
        {
            "step": 3,
            "label": "backend",
            "introduction": "register_preblocker edits the NewApp constructor so the custom handler is registered with the application.",
            "function": "register_preblocker(app_dir)",
            "usage": "register_preblocker(\"./myapp\")"
        },
        {
            "step": 4,
            "label": "backend",
            "introduction": "compile_application rebuilds the chain binary so the newly added handler is included.",
            "function": "compile_application()",
            "usage": "compile_application()"
        },
        {
            "step": 5,
            "label": "backend",
            "introduction": "start_local_chain launches a single-node validator so that new blocks can be produced for testing.",
            "function": "start_local_chain(home=\"./data\", chain_id=\"localnet\", binary=\"appd\")",
            "usage": "start_local_chain(\"./data\", \"localnet\")"
        },
        {
            "step": 6,
            "label": "backend",
            "introduction": "monitor_logs scans the node log file and prints any lines that match the custom PrepareProposal debug pattern.",
            "function": "monitor_logs()",
            "usage": "monitor_logs()"
        }
    ],
    "frontend": [],
    "backend": [
        "results = search_circuit_docs(\"Cosmos SDK PrepareProposal override BaseApp\")#step: 1 Tool: SearchCosmosDocumentation Desciption: Query: \"Cosmos SDK PrepareProposal override BaseApp\" to locate the extended ABCI handler documentation.",
        "create_preblocker_fn(\"./myapp\")#step: 2 Tool: implement_custom_prepare_proposal Desciption: In app.go (or a new file), define `func (app *App) PrepareProposal(ctx sdk.Context, req *abci.RequestPrepareProposal) (*abci.ResponsePrepareProposal, error)` with custom logic.",
        "register_preblocker(\"./myapp\")#step: 3 Tool: modify_source_code Desciption: Within NewApp constructor, call `app.SetPrepareProposal(app.PrepareProposal)` to register the override.",
        "compile_application()#step: 4 Tool: compile_application Desciption: Rebuild the binary to include the new handler.",
        "start_local_chain(\"./data\", \"localnet\")#step: 5 Tool: start_node Desciption: Launch a validator node; produce at least one block.",
        "monitor_logs()#step: 6 Tool: monitor_logs Desciption: Watch for custom debug statements emitted from the PrepareProposal function to confirm it is being called."
    ],
    "intent": "Trigger PrepareProposal handler override",
    "workflow": [
        {
            "step": 1,
            "tool": "SearchCosmosDocumentation",
            "description": "Query: \"Cosmos SDK PrepareProposal override BaseApp\" to locate the extended ABCI handler documentation."
        },
        {
            "step": 2,
            "tool": "implement_custom_prepare_proposal",
            "description": "In app.go (or a new file), define `func (app *App) PrepareProposal(ctx sdk.Context, req *abci.RequestPrepareProposal) (*abci.ResponsePrepareProposal, error)` with custom logic."
        },
        {
            "step": 3,
            "tool": "modify_source_code",
            "description": "Within NewApp constructor, call `app.SetPrepareProposal(app.PrepareProposal)` to register the override."
        },
        {
            "step": 4,
            "tool": "compile_application",
            "description": "Rebuild the binary to include the new handler."
        },
        {
            "step": 5,
            "tool": "start_node",
            "description": "Launch a validator node; produce at least one block."
        },
        {
            "step": 6,
            "tool": "monitor_logs",
            "description": "Watch for custom debug statements emitted from the PrepareProposal function to confirm it is being called."
        }
    ],
    "outcome_checks": [
        "Compilation succeeds.",
        "Validator logs show custom PrepareProposal execution on every block proposal.",
        "No consensus errors occur after the override is active."
    ]
}